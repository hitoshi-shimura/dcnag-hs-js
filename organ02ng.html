<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>music button</title>
    <link rel="stylesheet" href="ssj.css">
<!--- レスポンシブのために記述しておく ---> 
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">    
  </head>
  <body>
    <button onclick="playSong()">Play Song</button>
    <script>
      // 音符と長さの定義
      // const notes = {
      //   C: { frequency: 261.63, duration: 0.5 },
      //   D: { frequency: 293.66, duration: 0.5 },
      //   E: { frequency: 329.63, duration: 0.5 },
      //   F: { frequency: 349.23, duration: 0.5 },
      //   G: { frequency: 392.00, duration: 0.5 },
      //   A: { frequency: 440.00, duration: 0.5 },
      //   B: { frequency: 493.88, duration: 0.5 }
      // };

      
      let notes = {
       C: "maou_se_inst_piano1_1do.mp3",
       D: "maou_se_inst_piano1_2re.mp3",
       E: "maou_se_inst_piano1_3mi.mp3",
       F: "maou_se_inst_piano1_4fa.mp3",
       G: "maou_se_inst_piano1_5so.mp3",
       A: "maou_se_inst_piano1_6ra.mp3",
       B: "maou_se_inst_piano1_7si.mp3",
      };

      // コーラスの定義
      const chorus = [
        'C', 'C', 'G', 'G', 'A', 'A', 'G',
        'F', 'F', 'E', 'E', 'D', 'D', 'C'
      ];
      
      // 音を演奏する関数
      function playSound( pianoKey ){
        const audio = new Audio(pianoKey); // 音声ファイルのパスを指定してください。
        audio.currentTime = 0; // 再生開始位置を先頭に設定
        audio.play();
        setTimeout(() => {
          audio.pause();
        }, 1000); // n秒後に再生を停止する
      }
    
      // コーラスを演奏する関数
      function playChorus() {
        // chorus.forEach(note => {
          // const { frequency, duration } = notes[note];

          for (let i=0; i<chorus.length; i++){
           // console.log(i, chorus[i]);
            let pianoKey= notes[chorus[i]]; 
            playSound(pianoKey);  
            // 次の音符を演奏する前に一定時間待つ
            if (i < chorus.length - 1) {
                sleep(2000); // 2秒待機
            }
          } 
      }

      function sleep(ms) {
          return new Promise(resolve => setTimeout(resolve, ms));
      }
          
      // ボタンクリック時の処理
      function playSong() {
        playChorus();
      }
  
    </script>
  </body>
</html>
